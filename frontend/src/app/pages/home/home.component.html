<section class="hero">
  <div class="hero-text">
    <div class="eyebrow">RankRetros</div>
    <h1>Discover top private servers</h1>
    <p class="subtitle">Habbo retros, RuneScape, Minecraft & more. Ranked by real votes with callback rewards.</p>
    <div class="hero-actions">
      <a [routerLink]="isAuthed ? '/dashboard' : '/register'" class="primary-btn">
        <span class="material-icon">rocket_launch</span>
        {{ isAuthed ? 'Go to dashboard' : 'Register your server' }}
      </a>
      <a routerLink="/dashboard" class="ghost-btn" *ngIf="isAuthed">
        <span class="material-icon">insights</span>
        View analytics
      </a>
    </div>
    <div class="hero-stats">
      <div class="stat">
        <span class="material-icon">group</span>
        <div class="stat-text">
          <div class="stat-title">Community first</div>
          <div class="stat-desc">Human moderation, duplicate blocking, and transparent rankings.</div>
        </div>
      </div>
      <div class="stat">
        <span class="material-icon">trophy</span>
        <div class="stat-text">
          <div class="stat-title">Rewards built-in</div>
          <div class="stat-desc">Credits, diamonds, duckets, RS gold, crate keys, and custom rewards per vote.</div>
        </div>
      </div>
      <div class="stat">
        <span class="material-icon">security</span>
        <div class="stat-text">
          <div class="stat-title">Secure callbacks</div>
          <div class="stat-desc">Signed callbacks with per-server secrets and replay protection.</div>
        </div>
      </div>
      <div class="stat">
        <span class="material-icon">leaderboard</span>
        <div class="stat-text">
          <div class="stat-title">Live ranking</div>
          <div class="stat-desc">Top voted servers right now</div>
        </div>
      </div>
    </div>

    <div class="logo-row">
      <div class="logo-item" data-tip="Habbo Hotel">
        <img src="/game-icons/habbo-icon.png" alt="Habbo Hotel logo" />
      </div>
      <div class="logo-item" data-tip="RuneScape">
        <img src="/game-icons/runescape-icon.png" alt="RuneScape logo" />
      </div>
      <div class="logo-item" data-tip="Minecraft">
        <img src="/game-icons/minecraft-icon.png" alt="Minecraft logo" />
      </div>
    </div>
  </div>
  <div class="hero-card">
    <div class="hero-chip">
      <span class="material-icon">videogame_asset</span> Multi-game listings
    </div>
    <h3>List your server</h3>
    <p>Retro hotels, RuneScape and Minecraft private servers can all plug in and start collecting votes today.</p>

    <div class="micro-chart" *ngIf="chartSeries.length">
      <div class="chart-header">
        <div>
          <p class="eyebrow subtle">Total votes</p>
          <h4>7-day curve + 3-day forecast</h4>
        </div>
        <div class="live-dot">
          <span class="dot"></span>
          <span class="live-label">Live</span>
        </div>
      </div>

      <div class="chart-shell">
        <svg [attr.viewBox]="'0 0 ' + chartWidth + ' ' + chartHeight" preserveAspectRatio="none">
          <defs>
            <linearGradient id="chartGradient" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="#8ea2ff" stop-opacity="0.45"></stop>
              <stop offset="100%" stop-color="#8ea2ff" stop-opacity="0.05"></stop>
            </linearGradient>
          </defs>
          <polygon [attr.points]="chartAreaPoints" fill="url(#chartGradient)" opacity="0.7"></polygon>
          <polyline
            [attr.points]="chartLinePoints"
            fill="none"
            stroke="#8ea2ff"
            stroke-width="3"
            stroke-linecap="round"
            stroke-linejoin="round"
          ></polyline>
          <polyline
            [attr.points]="predictedLinePoints"
            fill="none"
            stroke="#5be6c2"
            stroke-width="2.5"
            stroke-dasharray="6 6"
            stroke-linecap="round"
            stroke-linejoin="round"
          ></polyline>
        </svg>
        <div class="crosshair" [style.left.%]="crosshairPercent"></div>
        <div class="chart-points">
          <div
            *ngFor="let pt of chartPoints"
            class="chart-point"
            [style.left.%]="pt.xPercent"
            [style.top.%]="pt.yPercent"
            [class.latest]="pt.latest"
          >
            <span class="pulse"></span>
            <div class="tooltip">
              <div class="tooltip-label">{{ pt.label }}</div>
              <div class="tooltip-value">{{ pt.value }} votes</div>
            </div>
          </div>
        </div>
      </div>
      <div class="chart-legend">
        <span class="legend-item"><span class="legend-dot"></span> Total votes</span>
        <span class="legend-item"><span class="legend-line current"></span> 7-day curve</span>
        <span class="legend-item"><span class="legend-line forecast"></span> 3-day forecast</span>
      </div>
    </div>
    <p class="hint small">Totals shown are aggregated across all servers. Forecast projects the next 3 days.</p>

    <a [routerLink]="isAuthed ? '/dashboard' : '/register'" class="primary-btn ghost-outline">
      <span class="material-icon">how_to_vote</span>
      Start ranking
    </a>
  </div>
</section>

<section class="pools">
  <div class="pool-header">
    <div>
      <p class="eyebrow">Ranking pools</p>
      <h2>Find and play</h2>
      <p class="hint">Join a ranking pool to find servers by game and community.</p>
    </div>
    <div class="pool-buttons">
      <button class="pool-btn habbo" [class.active]="selectedPool === 'habbo'" (click)="selectPool('habbo')">
        <span class="material-icon">apartment</span> Habbo Hotel
      </button>
      <button class="pool-btn runescape" [class.active]="selectedPool === 'runescape'" (click)="selectPool('runescape')">
        <span class="material-icon">swords</span> RuneScape
      </button>
      <button class="pool-btn minecraft" [class.active]="selectedPool === 'minecraft'" (click)="selectPool('minecraft')">
        <span class="material-icon">gavel</span> Minecraft
      </button>
    </div>
  </div>

  <div *ngIf="selectedPool === 'habbo'" class="pool-content">
    <div class="list-header">
      <h3><span class="material-icon">leaderboard</span> Top Habbo servers</h3>
      <div class="sort">
        <span class="sort-label">
          <span class="material-icon">sort</span>
          Sorted by
        </span>
        <div class="select-wrapper">
          <select [(ngModel)]="sortOption">
            <option value="votes">Top votes</option>
            <option value="views">Top views</option>
            <option value="votesAsc">Least votes</option>
            <option value="viewsAsc">Least views</option>
          </select>
        </div>
        <span class="sort-active">Showing: {{ getSortLabel(sortOption) }}</span>
      </div>
    </div>

    <div class="cards">
      <article *ngFor="let hotel of displayedHabbo; let i = index" class="card">
        <div class="rank-badge">#{{ i + 1 }}</div>
        <div class="card-body">
          <div class="card-title">
            <h3>{{ hotel.name }}</h3>
            <span class="slug">{{ hotel.slug }}</span>
          </div>
          <p class="description">{{ hotel.description || 'No description yet.' }}</p>
          <div class="meta">
            <span class="tag">
              <span class="material-icon">apartment</span> Habbo
            </span>
            <span class="votes">
              <span class="material-icon">how_to_vote</span>
              {{ hotel.totalVotes || 0 }} votes
            </span>
            <span class="votes">
              <span class="material-icon">visibility</span>
              {{ hotel.views || 0 }} views
            </span>
          </div>
        </div>
      </article>
    </div>
    <div *ngIf="!error && !loading && displayedHabbo.length === 0" class="card empty">
      No servers yet. Be the first to register yours.
    </div>
    <div *ngIf="error" class="card error">{{ error }}</div>
  </div>

  <div *ngIf="selectedPool === 'runescape' || selectedPool === 'minecraft'" class="coming-soon">
    <div class="coming-card">
      <span class="material-icon">hourglass_top</span>
      <div>
        <h3>{{ selectedPool === 'runescape' ? 'RuneScape pool' : 'Minecraft pool' }}</h3>
        <p>Coming soon, weâ€™re wiring callbacks and rankings for this game type.</p>
      </div>
    </div>
  </div>
</section>
